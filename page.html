<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Maze3D</title>
  <style>
    body { margin: 0; overflow: hidden; }
    canvas { display: block; }
  </style>
</head>
<body>
  <canvas id="Maze3D" width="400" height="300"></canvas>
  <script>
    // 3d表示参考 https://2dgames.jp/fake-3d-dungeon/
    const getRandomInt = (max) => Math.floor(Math.random() * max);

    const [width,height] = [5,6]
    const mazeSize = { x: width*2+1 , y: height*2+1 };
    const start = { x: getRandomInt(width)*2+1, y: getRandomInt(height)*2+1 };
    const goal ={ x: getRandomInt(width)*2+1, y: getRandomInt(height)*2+1 };
    const dirs =[[-2,0],[2,0],[0,-2],[0,2]];
    
    const maze = Array.from({ length: mazeSize.y }, () => Array(mazeSize.x).fill(1));
    function shuffle(array){
      for (let i = 0; i < array.length; i++) {
        const r = getRandomInt(i+1);
        [array[i], array[r]] = [array[r], array[i]];
      }
      return array;
    }
    function mazeGenerator(x,y){
      maze[y][x] = 0;

      const dir = shuffle([...dirs]);
      for (const [dx, dy] of dir) {
        const nx = x + dx;
        const mx = x + dx / 2;
        const ny = y + dy;
        const my = y + dy / 2;

        if (0 < nx && nx < mazeSize.x - 1 && 0 < ny && ny < mazeSize.y - 1 && maze[ny][nx] === 1) {
          maze[my][mx] = 0;
          mazeGenerator(nx, ny);
        }
      }
    }

    mazeGenerator(start.x,start.y);
  </script>
</body>
</html>